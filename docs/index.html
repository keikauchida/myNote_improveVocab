<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <title>my note to increase vocab</title>
</head>

<style>
  body {
    margin: 50px;
  }

  p,
  P {
    margin: 0px;
    padding: 0px;
    font-size: 16px;
  }

  #caption-container {
    color: rgb(200, 147, 206);
  }

  #quotes-container {
    margin-top: 20px;
  }

  .movieTitle,
  .updatedDate {
    color: rgb(16, 156, 151);
    font-style: italic;
  }

  .updatedDate {
    font-size: small;
  }

  .card {
    border: 1px solid #ccc;
    border-radius: 8px;
    padding: 20px;
    margin-top: 10px;
  }

  .word,
  .definition {
    padding-left: 70px;
  }

  .word {
    margin-top: 10px;
    color: rgb(225, 143, 0);
  }
</style>

<body>
  <h1>my note to increase vocabrary</h1>
  <div id="caption-container"></div>
  <div id="quotes-container"></div>
</body>

<script>
  // キャプション
  const caption = ["marquee.html", "blink.html"];
  const choice = caption[Math.floor(Math.random() * caption.length)]
  const captionContainer = document.getElementById("caption-container");

  fetch(`caption/${choice}`)
    .then(res => res.text())
    .then(html => {
      captionContainer.innerHTML = html;
      if (choice === "blink.html") {
        const script = document.createElement("script");
        script.textContent = `
        const lights = document.querySelectorAll(".light");
        setInterval(() => {
          lights.forEach(light => {
            light.style.opacity = Math.random() > 0.5 ? 0 : 1;
          });
        }, 1000);
      `;
        document.body.appendChild(script);
      }
    })


  //セリフ
  fetch("data.json")
    .then(res => res.json())
    .then(data => {
      const quotesContainerDiv = document.getElementById("quotes-container")
      data.forEach(list => {
        //日付
        const updatedDate = document.createElement("p")
        updatedDate.className = "updatedDate"
        updatedDate.textContent = list.updatedDate
        quotesContainerDiv.appendChild(updatedDate)

        // 映画タイトル
        const movieP = document.createElement("p")
        movieP.className = "movieTitle"
        movieP.textContent = list.movie
        quotesContainerDiv.appendChild(movieP)

        // セリフ
        list.quotes.forEach(quote => {
          const cardDiv = document.createElement("div")
          cardDiv.className = "card"

          // セリフ本体
          const quoteP = document.createElement("p")
          quoteP.textContent = quote.quote
          cardDiv.appendChild(quoteP)

          // words配列をループ
          quote.words.forEach(wordObj => {
            const wordP = document.createElement("p")
            wordP.className = "word"
            wordP.textContent = `✒︎ ${wordObj.word}`

            const defP = document.createElement("p")
            defP.className = "definition"
            defP.textContent = wordObj.note

            cardDiv.appendChild(wordP)
            cardDiv.appendChild(defP)
          })

          quotesContainerDiv.appendChild(cardDiv)
        })
      })
    })
</script>

</html>