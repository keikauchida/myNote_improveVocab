<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Quote to JSON Converter</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }

    textarea {
      width: 100%;
      height: 200px;
      margin-bottom: 10px;
    }

    pre {
      background: #f4f4f4;
      padding: 10px;
      border-radius: 8px;
    }
  </style>
</head>

<body>
  <h2>Quote & Words → JSON</h2>
  <p>書式: <br>
    Quote[TAB]word: definition<br>
    複数単語は半角スペースで区切ってOK</p>

  <textarea id="input"></textarea>
  <br>
  <button id="convert">Convert</button>

  <h3>Result JSON</h3>
  <pre id="output"></pre>

  <script>
    document.getElementById("convert").addEventListener("click", () => {
      const input = document.getElementById("input").value.trim()
      const lines = input.split("\n")
      const results = []

      lines.forEach(line => {
        if (!line.trim()) return
        const [quotePart, defsPart] = line.split("\t")
        if (!quotePart || !defsPart) return

        const defs = defsPart.split(/\s+(?=\w+:)/) // word: ... の部分を分割
        const words = defs.map(d => {
          const [word, def] = d.split(":").map(s => s.trim())
          return { word, definition: def }
        })

        results.push({
          quote: quotePart.trim(),
          words
        })
      })

      document.getElementById("output").textContent = JSON.stringify(results, null, 2)
    })
  </script>
</body>

</html>